## Lab 10.7

In this lab, the following objectives should be acquired:
- Create a Role that allows for viewing of pods in the default namespace
- Configure a RoleBinding that allows all authenticated users to use this role


Rolebinding:

```YAML
kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: lab107-role-binding
  namespace: default
subjects:
- kind: User
  name: rick-sanchez
  apiGroup: ""
roleRef:
  kind: Role
  name: C-137
  apiGroup: ""
```

Role:
``` YAML
kind: Role
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  namespace: default
  name: C-137
rules:
- apiGroups: [""]
  resources: ["pods"]
  verbs: ["list", "get","watch"]
```


Certificate:

```bash
kubectl apply -f lab107-role-binding.yaml

kubectl apply -f lab107-role.yaml
```

```bash
openssl genrsa -out rick.key 2048
```

```bash
openssl req -new -key rick.key -out rick.csr -subj "/CN=rick/O=k8s"
```

```bash
sudo openssl x509 -req -in rick.csr -CA /etc/kubernetes/pki/ca.crt -CAkey /etc/kubernetes/pki/ca.key -CAcreateserial -out rick.crt -days 1800
```

```bash
kubectl config set-credentials rick --client-certificate=rick.crt --client-key=rick.key
User "rick" set.
```

```bash
kubectl config get-contexts
```

```bash
kubectl get pods 
```